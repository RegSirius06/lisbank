{% extends "base_generic.html" %}

{% block content %}
    <h1>Мои транзакции:</h1>
    <h4>Сейчас на вашем счету 
        {% if request.user.account.balance > 0 %}
            <span class="green">{{request.user.account.balance}}t</span>
        {% elif request.user.account.balance < 0 %}
            <span class="red">{{request.user.account.balance}}t</span>
        {% else %}
            {{request.user.account.balance}}t
        {% endif %}
    .</h4>
    <h4><a href="{% url 'new-transaction-base' %}">Совершить перевод средств...</a></h4>
    <h2>Последние изменения счёта:</h2>
    {% if request.user.account.get_transactions %}
    <table class="table">
        
        <tr class="tr">
            <td class="td">Дата</td>
            <td class="td">Изменение счёта</td>
            <td class="td">Комментарий</td>
        </tr>

        {% for element in request.user.account.get_transactions %}
        <tr class="tr">
            <td class="td">{{ element.date }}</td>
            <td class="td">
                {% if element.sign == '-' %}
                    <span {% if element.receiver == request.user.account %} class="red" {% else %} class="green" {% endif %}>{% if element.receiver == request.user.account %}-{% else %}+{% endif %}{{ element.get_sum }}</span>
                {% else %}
                    <span {% if element.receiver == request.user.account %} class="green" {% else %} class="red" {% endif %}>{% if element.receiver == request.user.account %}+{% else %}-{% endif %}{{ element.get_sum }}</span>
                {% endif %}
            </td>
            <td class="td">{{ element.comment }}</td>
        </tr>
        {% endfor %}

    </table>
    {% else %}
      <p>На ваш счет ещё не было поступлений.</p>
    {% endif %}
    <a href="#top" title="В начало" tabindex="-1" class="topbutton">Наверх</a>
{% endblock %}
